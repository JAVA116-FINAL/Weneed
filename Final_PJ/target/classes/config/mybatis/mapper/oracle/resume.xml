<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mybatis.mapper.resume">

	<!-- 안되면 oracle useGenerate true로 바꾸고, update처리 cart=>orderDetails -->
	<update id="insertResume" parameterType="resumeVo">
		<selectKey keyProperty="resumeNo" resultType="int" order="BEFORE">
			select resume_seq.nextval from dual
		</selectKey>
		insert into resume(resume_No, mem_no, resume_Title,resume_Name, resume_Email,resume_Hp, temp_flag, lang_flag)
		select #{resumeNo},mem_No,name||#{resumeNo},name,email, hp,'Y','KR' 
		from memberInfo 
		where mem_no=#{memNo}		
	</update>
	
	<select id="selectResume" parameterType="int" resultType="resumeVo">
		select * from 
		(select * from resume where mem_No=#{memNo} order by resume_no desc)
		where rownum=1
	</select>
	
	<update id="updateResume" parameterType="resumeVo">
		update resume 
		set resume_Title= #{resumeTitle  ,jdbcType=VARCHAR} ,resume_Name=#{resumeName} ,resume_Email=#{resumeEmail},
		 	resume_Hp=#{resumeHp}, resume_Introduce=#{resumeIntroduce},temp_Flag=#{tempFlag},resume_Regdate=sysdate,lang_flag=#{langFlag}
		where resume_No=#{resumeNo}
	</update>
	
	
	
	
	
</mapper>









